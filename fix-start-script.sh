#!/bin/bash

echo "ğŸ”§ ä¿®å¤å¯åŠ¨è„šæœ¬é€»è¾‘..."

# æ£€æŸ¥å½“å‰ start.sh æ˜¯å¦åŒ…å«æ—§çš„é€»è¾‘
if grep -q "ç­‰å¾…åç«¯ç«¯å£.*ç›‘å¬.*(.*/15)" start.sh; then
    echo "âŒ æ£€æµ‹åˆ°æ—§ç‰ˆæœ¬çš„å¯åŠ¨é€»è¾‘ï¼Œæ­£åœ¨ä¿®å¤..."
    
    # å¤‡ä»½åŸæ–‡ä»¶
    cp start.sh start.sh.backup
    
    # ä½¿ç”¨ sed å¿«é€Ÿä¿®å¤
    sed -i 's/for i in {1\.\.15}; do/for i in {1..10}; do/g' start.sh
    sed -i 's/ç­‰å¾…åç«¯ç«¯å£ 8090 ç›‘å¬\.\.\. (\([0-9]*\)\/15)/ç­‰å¾…åç«¯ç«¯å£ 8090 ç›‘å¬... (\1\/10)/g' start.sh
    sed -i 's/ç­‰å¾…åç«¯ç«¯å£ 3000 ç›‘å¬\.\.\. (\([0-9]*\)\/15)/ç­‰å¾…åç«¯ç«¯å£ 3000 ç›‘å¬... (\1\/10)/g' start.sh
    
    echo "âœ… å¯åŠ¨è„šæœ¬å·²ä¿®å¤"
else
    echo "âœ… å¯åŠ¨è„šæœ¬é€»è¾‘æ­£ç¡®"
fi

# æ£€æŸ¥æ˜¯å¦åŒ…å«é‡è¯•é€»è¾‘
if grep -q "ç¬¬.*æ¬¡å°è¯•å¯åŠ¨æœåŠ¡" start.sh; then
    echo "âœ… é‡è¯•é€»è¾‘å·²å­˜åœ¨"
else
    echo "âš ï¸ é‡è¯•é€»è¾‘ç¼ºå¤±ï¼Œéœ€è¦é‡æ–°éƒ¨ç½²"
fi

echo "ğŸ”§ ä¿®å¤å®Œæˆ"
